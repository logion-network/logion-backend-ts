{
    "openapi": "3.0.0",
    "info": {
        "title": "logion backend REST API views definition",
        "version": "0.1.0"
    },
    "paths": {},
    "components": {
        "schemas": {
            "AcceptProtectionRequestView": {
                "type": "object",
                "properties": {
                    "locId": {
                        "type": "string",
                        "description": "ID of the Identity LOC to associate with the protection request"
                    }
                },
                "title": "AcceptProtectionRequestView",
                "description": "Parameters for Protection Request's acceptance"
            },
            "CreateProtectionRequestView": {
                "type": "object",
                "properties": {
                    "addressToRecover": {
                        "type": "string",
                        "description": "If this request is a recovery request, tells the address to recover"
                    },
                    "isRecovery": {
                        "type": "boolean",
                        "description": "True if the the protection request is also a recovery request"
                    },
                    "otherLegalOfficerAddress": {
                        "type": "string",
                        "description": "The SS58 address of the other legal officer the request was submitted to"
                    },
                    "requesterAddress": {
                        "type": "string",
                        "description": "The SS58 address of the requester"
                    },
                    "userIdentity": {
                        "description": "The identification data of the requester",
                        "$ref": "#/components/schemas/UserIdentityView"
                    },
                    "userPostalAddress": {
                        "description": "The postal address of the requester",
                        "$ref": "#/components/schemas/PostalAddressView"
                    }
                },
                "title": "CreateProtectionRequestView",
                "description": "A Protection Request to create"
            },
            "FetchProtectionRequestsResponseView": {
                "type": "object",
                "properties": {
                    "requests": {
                        "type": "array",
                        "description": "The Protection Requests matching provided specification",
                        "items": {
                            "$ref": "#/components/schemas/ProtectionRequestView"
                        }
                    }
                },
                "title": "FetchProtectionRequestsResponseView",
                "description": "The fetched Protection Requests"
            },
            "FetchProtectionRequestsSpecificationView": {
                "type": "object",
                "properties": {
                    "statuses": {
                        "type": "array",
                        "description": "The statuses of expected Protection Requests",
                        "uniqueItems": true,
                        "items": {
                            "type": "string",
                            "enum": [
                                "ACCEPTED",
                                "PENDING",
                                "REJECTED",
                                "ACTIVATED"
                            ]
                        }
                    },
                    "kind": {
                        "type": "string",
                        "description": "The kind of protection request to be returned",
                        "enum": [
                            "ANY",
                            "PROTECTION_ONLY",
                            "RECOVERY"
                        ]
                    },
                    "requesterAddress": {
                        "type": "string",
                        "description": "The SS58 address of the requester in expected Protection Requests"
                    }
                },
                "title": "FetchProtectionRequestsSpecificationView",
                "description": "The specification for fetching Protection Requests"
            },
            "FetchTransactionsResponseView": {
                "type": "object",
                "properties": {
                    "transactions": {
                        "type": "array",
                        "description": "The transactions matching provided specification",
                        "items": {
                            "$ref": "#/components/schemas/TransactionView"
                        }
                    }
                },
                "title": "FetchTransactionsResponseView",
                "description": "The fetched transactions"
            },
            "FetchTransactionsSpecificationView": {
                "type": "object",
                "properties": {
                    "address": {
                        "type": "string",
                        "description": "The SS58 address of the account from or to which the expected transaction is done"
                    }
                },
                "title": "FetchTransactionsSpecificationView",
                "description": "The specification for fetching Tokenization Requests"
            },
            "LegalOfficerDecisionView": {
                "type": "object",
                "properties": {
                    "decisionOn": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The decision timestamp (if status is 'ACCEPTED' or 'REJECTED')"
                    },
                    "rejectReason": {
                        "type": "string",
                        "description": "If status is 'REJECTED', the reason of the rejection"
                    },
                    "status": {
                        "type": "string",
                        "description": "The decision status",
                        "enum": [
                            "ACCEPTED",
                            "PENDING",
                            "REJECTED"
                        ]
                    },
                    "locId": {
                        "type": "string",
                        "description": "ID of the Identity LOC linked to an accepted protection request."
                    }
                },
                "title": "LegalOfficerDecisionView",
                "description": "Legal Officer decision"
            },
            "PostalAddressView": {
                "type": "object",
                "properties": {
                    "city": {
                        "type": "string",
                        "description": "City"
                    },
                    "country": {
                        "type": "string",
                        "description": "Country"
                    },
                    "line1": {
                        "type": "string",
                        "description": "First address line"
                    },
                    "line2": {
                        "type": "string",
                        "description": "Second address line"
                    },
                    "postalCode": {
                        "type": "string",
                        "description": "Postal code"
                    }
                },
                "title": "PostalAddressView",
                "description": "A postal address"
            },
            "ProtectionRequestView": {
                "type": "object",
                "properties": {
                    "addressToRecover": {
                        "type": "string",
                        "description": "If this request is a recovery request, tells the address to recover"
                    },
                    "createdOn": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The creation timestamp"
                    },
                    "decision": {
                        "$ref": "#/components/schemas/LegalOfficerDecisionView"
                    },
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "The ID of created Protection Request"
                    },
                    "isRecovery": {
                        "type": "boolean",
                        "description": "True if the the protection request is also a recovery request"
                    },
                    "legalOfficerAddress": {
                        "type": "string",
                        "description": "The SS58 address of the legal officer the request was submitted to"
                    },
                    "otherLegalOfficerAddress": {
                        "type": "string",
                        "description": "The SS58 address of the other legal officer the request was submitted to"
                    },
                    "requesterAddress": {
                        "type": "string",
                        "description": "The SS58 address of the requester"
                    },
                    "status": {
                        "type": "string",
                        "description": "The status (retrieved from chain)",
                        "enum": [
                            "ACCEPTED",
                            "PENDING",
                            "REJECTED",
                            "ACTIVATED"
                        ]
                    },
                    "userIdentity": {
                        "description": "The identification data of the requester",
                        "$ref": "#/components/schemas/UserIdentityView"
                    },
                    "userPostalAddress": {
                        "description": "The postal address of the requester",
                        "$ref": "#/components/schemas/PostalAddressView"
                    }
                },
                "title": "ProtectionRequestView",
                "description": "Information about the created Protection Request"
            },
            "RecoveryInfoView": {
                "type": "object",
                "properties": {
                    "accountToRecover": {
                        "$ref": "#/components/schemas/ProtectionRequestView"
                    },
                    "recoveryAccount": {
                        "$ref": "#/components/schemas/ProtectionRequestView"
                    }
                },
                "title": "RecoveryInfoView",
                "description": "The new (recovery) and old (to recover) account data"
            },
            "RejectProtectionRequestView": {
                "type": "object",
                "properties": {
                    "rejectReason": {
                        "type": "string",
                        "description": "The rejection reason"
                    }
                },
                "title": "RejectProtectionRequestView",
                "description": "The Protection Request to reject"
            },
            "RejectTokenRequestView": {
                "type": "object",
                "properties": {
                    "rejectReason": {
                        "type": "string",
                        "description": "The rejection reason"
                    }
                },
                "title": "RejectTokenRequestView",
                "description": "The Tokenization Request to reject"
            },
            "TransactionView": {
                "type": "object",
                "properties": {
                    "createdOn": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The timestamp of the transaction"
                    },
                    "fee": {
                        "type": "string",
                        "description": "The fee of the transaction."
                    },
                    "from": {
                        "type": "string",
                        "description": "The SS58 address of the account from which the transaction is done"
                    },
                    "method": {
                        "type": "string",
                        "description": "The method that created the transaction."
                    },
                    "pallet": {
                        "type": "string",
                        "description": "The pallet that created the transaction."
                    },
                    "reserved": {
                        "type": "string",
                        "description": "The reserved amount of the transaction."
                    },
                    "tip": {
                        "type": "string",
                        "description": "The tip of the transaction."
                    },
                    "to": {
                        "type": "string",
                        "description": "The SS58address of the account to which the transaction is done. May be null."
                    },
                    "total": {
                        "type": "string",
                        "description": "The total amount of the transaction."
                    },
                    "transferValue": {
                        "type": "string",
                        "description": "The value of the transfer, iff the transaction is a transfer."
                    },
                    "successful": {
                        "type": "boolean",
                        "description": "Indicates if the transaction was successful."
                    },
                    "error": {
                        "type": "object",
                        "properties": {
                            "section": {
                                "type": "string",
                                "description": "The error section, typically equal to the pallet."
                            },
                            "name": {
                                "type": "string",
                                "description": "The error name."
                            },
                            "details": {
                                "type": "string",
                                "description": "Some details about the error."
                            }
                        }
                    }
                },
                "title": "TransactionView",
                "description": "A transaction between 2 accounts"
            },
            "UserIdentityView": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "description": "E-mail"
                    },
                    "firstName": {
                        "type": "string",
                        "description": "First name"
                    },
                    "lastName": {
                        "type": "string",
                        "description": "Last name"
                    },
                    "phoneNumber": {
                        "type": "string",
                        "description": "Phone number"
                    }
                },
                "title": "UserIdentityView",
                "description": "Physical person identification data"
            },
            "SignInRequestView": {
                "type": "object",
                "properties": {
                    "addresses": {
                        "type": "array",
                        "description": "Addresses of the accounts to be signed in",
                        "items": {
                            "type": "string",
                            "description": "The SS58 address of the account to be signed in",
                            "example": "5HQjUUY1uiuWoQyAgHNnYM31vvquBkAHyGpqBQYWqVrGKsdb"
                        }
                    }
                },
                "title": "SignInRequestView",
                "description": "the sign-in request"
            },
            "SignInResponseView": {
                "type": "object",
                "properties": {
                    "sessionId": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Session identifier",
                        "example": "5e4ef4bb-8657-444c-9880-d89e9403fc85"
                    }
                },
                "title": "SignInResponseView",
                "description": "the sign-in response"
            },
            "SignatureView": {
                "type": "object",
                "properties": {
                    "signature": {
                        "type": "string",
                        "description": "<p>A base64-encoded SHA256 hash of a concatenation of</p><ol><li>a resource</li><li>an operation</li><li>the <code>signedOn</code> field</li><li>additional fields in function of the request</li></ol>"
                    },
                    "signedOn": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The signature's timestamp"
                    }
                },
                "title": ""
            },
            "TokenView": {
                "type": "object",
                "properties": {
                    "value": {
                        "type": "string",
                        "description": "The encoded JWT token"
                    },
                    "expiredOn": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The token expiration timestamp"
                    }
                }
            },
            "AuthenticateRequestView": {
                "type": "object",
                "properties": {
                    "signatures": {
                        "type": "object",
                        "additionalProperties": {
                            "$ref": "#/components/schemas/SignatureView"
                        },
                        "description": "A map of signatures, index by SS58 addresses of authentication requester",
                        "example": {
                            "5GEpejzbL7Ch8hrRuWsTVCfVRLFZm1zKMF989J4NSiH8JwPn": {
                                "signature": "0xdc54e22464db114b570ea21ec499181fb1fb3c2582529....",
                                "signedOn": "2021-09-17T13:13:05.833"
                            },
                            "5HQjUUY1uiuWoQyAgHNnYM31vvquBkAHyGpqBQYWqVrGKsdb": {
                                "signature": "0xdc54e22464db114b570ea21ec499181fb1fb3c2582529....",
                                "signedOn": "2021-09-17T13:13:05.833"
                            }
                        }
                    }
                },
                "title": "AuthenticateRequestView",
                "description": "the authentication request"
            },
            "AuthenticateResponseView": {
                "type": "object",
                "properties": {
                    "tokens": {
                        "type": "object",
                        "additionalProperties": {
                            "$ref": "#/components/schemas/TokenView"
                        },
                        "description": "A map of tokens, indexed by SS58 address of authentication requester",
                        "example": {
                            "5GEpejzbL7Ch8hrRuWsTVCfVRLFZm1zKMF989J4NSiH8JwPn": {
                                "value": "eyJhbGciOiJIUzM4NCI....",
                                "expiredOn": "2021-09-17T14:13:06.000"
                            },
                            "5HQjUUY1uiuWoQyAgHNnYM31vvquBkAHyGpqBQYWqVrGKsdb": {
                                "value": "eyJhbGciOiJIUzM4NCI....",
                                "expiredOn": "2021-09-17T14:13:06.000"
                            }
                        }
                    }
                },
                "title": "AuthenticateResponseView",
                "description": "the authentication response"
            },
            "LocRequestStatus": {
                "type": "string",
                "description": "The request's status",
                "enum": [
                    "OPEN",
                    "REQUESTED",
                    "REJECTED",
                    "CLOSED"
                ]
            },
            "LocType": {
                "type": "string",
                "description": "The LOC's type",
                "enum": [
                    "Identity",
                    "Transaction"
                ]
            },
            "IdentityLocType": {
                "type": "string",
                "description": "The Identity LOC's type",
                "enum": [
                    "Polkadot",
                    "Logion"
                ]
            },
            "CreateLocRequestView": {
                "type": "object",
                "properties": {
                    "requesterAddress": {
                        "type": "string",
                        "description": "The SS58 address of the LOC requester"
                    },
                    "requesterIdentityLoc": {
                        "type": "string",
                        "format": "uuid",
                        "description": "The ID of the LOC identifying the requester"
                    },
                    "description": {
                        "type": "string",
                        "description": "A description of the LOC"
                    },
                    "locType": {
                        "description": "The type of the LOC to create",
                        "$ref": "#/components/schemas/LocType"
                    },
                    "userIdentity": {
                        "description": "The identification data of the requester",
                        "$ref": "#/components/schemas/UserIdentityView"
                    }
                },
                "title": "CreateLocRequestView",
                "description": "A LOC Request to create"
            },
            "LocRequestView": {
                "type": "object",
                "properties": {
                    "ownerAddress": {
                        "type": "string",
                        "description": "The SS58 address of the legal officer that will own the LOC upon acceptance"
                    },
                    "requesterAddress": {
                        "type": "string",
                        "description": "The SS58 address of the LOC requester"
                    },
                    "requesterIdentityLoc": {
                        "type": "string",
                        "format": "uuid",
                        "description": "The ID of the LOC identifying the requester"
                    },
                    "description": {
                        "type": "string",
                        "description": "A description of the LOC"
                    },
                    "userIdentity": {
                        "description": "The identification data of the requester",
                        "$ref": "#/components/schemas/UserIdentityView"
                    },
                    "createdOn": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The creation timestamp"
                    },
                    "decisionOn": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The decision timestamp (if status is 'OPEN' or 'REJECTED')"
                    },
                    "closedOn": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The closing timestamp (if status is 'CLOSED')"
                    },
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "The ID of the LOC request, which is also the ID of the LOC"
                    },
                    "status": {
                        "$ref": "#/components/schemas/LocRequestStatus"
                    },
                    "rejectReason": {
                        "type": "string",
                        "description": "If status is 'REJECTED', the reason of the rejection"
                    },
                    "files": {
                        "type": "array",
                        "description": "The files attached to this request's LOC",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string",
                                    "description": "The file's name"
                                },
                                "hash": {
                                    "type": "string",
                                    "description": "The file's hash"
                                },
                                "nature": {
                                    "type": "string",
                                    "description": "The file's nature"
                                },
                                "addedOn": {
                                    "type": "string",
                                    "format": "date-time",
                                    "description": "The date-time of addition (chain time)"
                                },
                                "submitter": {
                                    "type": "string",
                                    "description": "The SS58 address of the file submitter"
                                }
                            }
                        }
                    },
                    "links": {
                        "type": "array",
                        "description": "The links attached to this request's LOC",
                        "items": {
                            "type": "object",
                            "properties": {
                                "target": {
                                    "type": "string",
                                    "description": "The link's target"
                                },
                                "addedOn": {
                                    "type": "string",
                                    "format": "date-time",
                                    "description": "The date-time of addition (chain time)"
                                },
                                "nature": {
                                    "type": "string",
                                    "description": "The link's nature"
                                }
                            }
                        }
                    },
                    "locType": {
                        "description": "The type of the LOC to create",
                        "$ref": "#/components/schemas/LocType"
                    },
                    "metadata": {
                        "type": "array",
                        "description": "The metadata attached to this request's LOC",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string",
                                    "description": "The item's name"
                                },
                                "value": {
                                    "type": "string",
                                    "description": "The item's value"
                                },
                                "addedOn": {
                                    "type": "string",
                                    "format": "date-time",
                                    "description": "The date-time of addition (chain time)"
                                },
                                "submitter": {
                                    "type": "string",
                                    "description": "The SS58 address of the metadata item submitter"
                                }
                            }
                        }
                    },
                    "voidInfo": {
                        "type": "object",
                        "description": "Data about LOC voiding",
                        "properties": {
                            "reason": {
                                "type": "string",
                                "description": "Voiding reason"
                            },
                            "voidedOn": {
                                "type": "string",
                                "format": "date-time",
                                "description": "The date-time of voiding (chain time)"
                            }
                        }
                    }
                },
                "title": "LocRequestView",
                "description": "An existing LOC Request"
            },
            "LocPublicView": {
                "type": "object",
                "properties": {
                    "ownerAddress": {
                        "type": "string",
                        "description": "The SS58 address of the legal officer that will own the LOC upon acceptance"
                    },
                    "requesterAddress": {
                        "type": "string",
                        "description": "The SS58 address of the LOC requester"
                    },
                    "requesterIdentityLoc": {
                        "type": "string",
                        "format": "uuid",
                        "description": "The ID of the LOC identifying the requester"
                    },
                    "createdOn": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The creation timestamp"
                    },
                    "closedOn": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The closing timestamp (if status is 'CLOSED')"
                    },
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "The ID of the LOC request, which is also the ID of the LOC"
                    },
                    "files": {
                        "type": "array",
                        "description": "The files attached to this request's LOC",
                        "items": {
                            "type": "object",
                            "properties": {
                                "nature": {
                                    "type": "string",
                                    "description": "The file's nature"
                                },
                                "hash": {
                                    "type": "string",
                                    "description": "The file's hash"
                                },
                                "addedOn": {
                                    "type": "string",
                                    "format": "date-time",
                                    "description": "The date-time of addition (chain time)"
                                },
                                "submitter": {
                                    "type": "string",
                                    "description": "The SS58 address of the file submitter"
                                }
                            }
                        }
                    },
                    "links": {
                        "type": "array",
                        "description": "The links attached to this request's LOC",
                        "items": {
                            "type": "object",
                            "properties": {
                                "target": {
                                    "type": "string",
                                    "description": "The link's target"
                                },
                                "addedOn": {
                                    "type": "string",
                                    "format": "date-time",
                                    "description": "The date-time of addition (chain time)"
                                },
                                "nature": {
                                    "type": "string",
                                    "description": "The link's nature"
                                }
                            }
                        }
                    },
                    "locType": {
                        "description": "The type of the LOC to create",
                        "$ref": "#/components/schemas/LocType"
                    },
                    "metadata": {
                        "type": "array",
                        "description": "The metadata attached to this request's LOC",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string",
                                    "description": "The item's name"
                                },
                                "value": {
                                    "type": "string",
                                    "description": "The item's value"
                                },
                                "addedOn": {
                                    "type": "string",
                                    "format": "date-time",
                                    "description": "The date-time of addition (chain time)"
                                },
                                "submitter": {
                                    "type": "string",
                                    "description": "The SS58 address of the metadata item submitter"
                                }
                            }
                        }
                    },
                    "voidInfo": {
                        "type": "object",
                        "description": "Data about LOC voiding",
                        "properties": {
                            "voidedOn": {
                                "type": "string",
                                "format": "date-time",
                                "description": "The date-time of voiding (chain time)"
                            }
                        }
                    }
                },
                "title": "LocPublicView",
                "description": "The published attributes of an existing LOC"
            },
            "FetchLocRequestsSpecificationView": {
                "type": "object",
                "properties": {
                    "ownerAddress": {
                        "type": "string",
                        "description": "The SS58 address of the owner in expected LOC Requests"
                    },
                    "requesterAddress": {
                        "type": "string",
                        "description": "The SS58 address of the requester in expected LOC Requests"
                    },
                    "statuses": {
                        "type": "array",
                        "description": "The statuses of expected LOC Requests",
                        "uniqueItems": true,
                        "items": {
                            "$ref": "#/components/schemas/LocRequestStatus"
                        }
                    },
                    "locTypes": {
                        "type": "array",
                        "description": "The type of the LOC to fetch",
                        "uniqueItems": true,
                        "items": {
                            "$ref": "#/components/schemas/LocType"
                        }
                    },
                    "identityLocType": {
                        "$ref": "#/components/schemas/IdentityLocType"
                    }
                },
                "title": "FetchLocRequestsSpecificationView",
                "description": "The specification for fetching LOC Requests"
            },
            "FetchLocRequestsResponseView": {
                "type": "object",
                "properties": {
                    "requests": {
                        "type": "array",
                        "description": "The LOC Requests matching provided specification",
                        "items": {
                            "$ref": "#/components/schemas/LocRequestView"
                        }
                    }
                },
                "title": "FetchLocRequestsResponseView",
                "description": "The fetched LOC Requests"
            },
            "RejectLocRequestView": {
                "type": "object",
                "properties": {
                    "rejectReason": {
                        "type": "string",
                        "description": "The rejection reason"
                    }
                },
                "title": "RejectLocRequestView",
                "description": "The info to reject a LOC request"
            },
            "AddFileView": {
                "type": "object",
                "properties": {
                    "nature": {
                        "type": "string",
                        "description": "The file's nature"
                    }
                }
            },
            "AddFileResultView": {
                "type": "object",
                "properties": {
                    "hash": {
                        "type": "string",
                        "description": "Hex-encoded SHA256 hash of added file"
                    }
                },
                "title": "AddFileResultView",
                "description": "The result of adding a file to a LOC"
            },
            "AddLinkView": {
                "type": "object",
                "properties": {
                    "target": {
                        "type": "string",
                        "description": "The link's target"
                    },
                    "nature": {
                        "type": "string",
                        "description": "The file's nature"
                    }
                }
            },
            "AddMetadataView": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "The item's name"
                    },
                    "value": {
                        "type": "string",
                        "description": "The item's value"
                    }
                }
            },
            "VoidLocView": {
                "type": "object",
                "properties": {
                    "reason": {
                        "type": "string",
                        "description": "The voiding reason"
                    }
                },
                "title": "VoidLocView",
                "description": "The parameters of LOC voiding"
            }
        }
    }
}
